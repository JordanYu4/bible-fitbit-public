<select id = "book_dropdown1">
  <%= bible_books.each do |book| %>
  <option><%= book %></option>
  <% end %>
</select>
<canvas id="book_percents" width="800" height="450"></canvas>
<script>
var initial_data = parseFloat(<%=@book_percentages["Genesis"].to_json.html_safe%>);
var book_percent_chart = new Chart(document.getElementById("book_percents"), {
    type: 'doughnut',
    data: {
      labels: ["Read", "Not Read"],
      datasets: [
        {
          label: "Percentages",
          backgroundColor: ["#3e95cd", "#8e5ea2"],
          data: [initial_data, 100-initial_data]
        }
      ]
    },
    options: {
      title: {
        display: true,
        text: 'What percent of Genesis have you read?'
      }
    }
});
var book_percents = <%= @book_percentages.to_json.html_safe %>;
$(document).on("change", "#book_dropdown1", function() {
  var dropdown = document.getElementById("book_dropdown1");
  var chosen_book = dropdown.options[dropdown.selectedIndex].text;
  console.log(chosen_book);
  book_percent_chart.data.datasets[0].data = [book_percents[chosen_book], 100 - book_percents[chosen_book]];
  book_percent_chart.options.title.text = "What percent of " + chosen_book + " have you read?";
  book_percent_chart.update();
 });
</script>